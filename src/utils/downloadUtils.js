// Utility functions for handling downloads and tracking

// Sample content for different guide types
const guideContents = {
  'Getting Started Guide': `AGROVALUE CONNECT - GETTING STARTED GUIDE
===========================================

Welcome to AgroValue Connect! This guide will help you set up your farmer profile and list your first product.

STEP 1: CREATE YOUR ACCOUNT
---------------------------
• Visit agrovalueconnect.com/register
• Select "Farmer" as your role
• Fill in your personal details
• Verify your email address

STEP 2: COMPLETE YOUR PROFILE
-----------------------------
• Add your farm name and location
• Upload farm images
• Provide farm certifications (if any)
• Write a compelling bio

STEP 3: VERIFICATION PROCESS
----------------------------
• Submit required documents (ID proof, farm ownership proof)
• Wait for verification (usually 24-48 hours)
• You'll receive an email once verified

STEP 4: LIST YOUR FIRST PRODUCT
-------------------------------
• Click "Add New Product" from dashboard
• Upload high-quality product images
• Write detailed product description
• Set competitive pricing
• Specify shipping details

STEP 5: TIPS FOR SUCCESS
------------------------
• Respond to buyer inquiries quickly
• Maintain accurate inventory
• Collect and respond to reviews
• Promote your products on social media

For more help, visit our Help Center or contact support@agrovalueconnect.com

Happy Selling!
The AgroValue Connect Team`,

  'Product Photography Tips': `AGROVALUE CONNECT - PRODUCT PHOTOGRAPHY TIPS
================================================

VIDEO TRANSCRIPT (15 minutes)

INTRODUCTION (0:00 - 1:30)
-------------------------
Welcome to our product photography tutorial! Good photos can increase your sales by up to 30%. Let's learn how to take professional-looking photos with just your smartphone.

EQUIPMENT NEEDED (1:30 - 3:45)
-----------------------------
• Smartphone with good camera (any modern phone works)
• Natural light from a window
• White poster board or cloth for background
• Tripod or stable surface
• Optional: reflector (can use white foam board)

LIGHTING TECHNIQUES (3:45 - 7:20)
--------------------------------
• Best time: Golden hour (early morning or late afternoon)
• Avoid direct harsh sunlight
• Use diffused window light
• Position product at 45-degree angle to light source
• Use reflector to fill shadows

COMPOSITION TIPS (7:20 - 10:15)
------------------------------
• Rule of thirds: place product off-center
• Fill the frame
• Show scale (include a common object for size reference)
• Multiple angles: front, side, top, detail shots
• Clean, uncluttered backgrounds

EDITING BASICS (10:15 - 12:45)
-----------------------------
• Adjust brightness and contrast
• Enhance colors naturally (don't oversaturate)
• Crop for better composition
• Remove spots or blemishes
• Keep it real - don't misrepresent your product

PRODUCT-SPECIFIC TIPS (12:45 - 14:30)
------------------------------------
• Honey: show texture and pour shots
• Pickles: show jar with ingredients visible
• Oils: show color clarity against light
• Grains: show texture and close-ups

SUMMARY (14:30 - 15:00)
----------------------
• Good lighting is key
• Keep backgrounds simple
• Show multiple angles
• Edit minimally
• Update photos seasonally

For more tips, visit our Resources section!`,

  'Pricing Your Products': `AGROVALUE CONNECT - PRICING STRATEGIES GUIDE
==============================================

A comprehensive guide to pricing your farm products competitively while maximizing profits.

UNDERSTANDING YOUR COSTS (Section 1)
-----------------------------------
Calculate your total cost per unit:

1. Production Costs:
   • Raw materials
   • Labor
   • Packaging materials
   • Equipment depreciation
   • Utilities

2. Platform Fees:
   • AgroValue Connect commission: 5%
   • Payment processing fees: 2-3%

3. Shipping Costs:
   • Packaging materials
   • Carrier fees
   • Insurance
   • Tracking

4. Marketing Costs:
   • Promotional materials
   • Photography
   • Advertising (optional)

MARKET RESEARCH (Section 2)
--------------------------
Study your competition:

• Check similar products on AgroValue Connect
• Compare prices across categories
• Read reviews to understand value perception
• Note seasonal price variations

PRICING STRATEGIES (Section 3)
-----------------------------

1. Cost-Plus Pricing:
   Total Cost + Desired Profit Margin
   Example: Cost $5 + 50% margin = $7.50

2. Value-Based Pricing:
   Price based on perceived value
   Premium products can command higher prices

3. Competitive Pricing:
   Match or slightly undercut competitors
   Good for commodity products

4. Penetration Pricing:
   Start low to gain customers, increase later
   Risky but can build market share

5. Premium Pricing:
   Higher price for premium quality
   Requires strong branding and quality

PSYCHOLOGICAL PRICING (Section 4)
--------------------------------
• Charm pricing: $9.99 instead of $10
• Prestige pricing: round numbers for luxury
• Bundle pricing: 3 for $25
• Volume discounts: 10% off for bulk

CALCULATING YOUR PRICE (Section 5)
---------------------------------
Example Formula:
Production Cost: $5.00
+ Platform Fee (5%): $0.40
+ Shipping: $3.00
+ Profit Margin (30%): $1.50
= Final Price: $9.90

TIPS FOR SUCCESS (Section 6)
---------------------------
• Start with competitive pricing
• Gather customer feedback
• Adjust based on demand
• Offer bundle deals
• Seasonal promotions
• Loyalty discounts for repeat buyers

Remember: Price too low and you lose profits, price too high and you lose customers. Find the sweet spot!

For personalized pricing advice, contact our farmer support team.`,

  'Quality Standards Guide': `AGROVALUE CONNECT - QUALITY STANDARDS GUIDE
============================================

Our commitment to quality ensures trust between farmers and buyers worldwide.

GENERAL QUALITY REQUIREMENTS (Section 1)
---------------------------------------
All products must meet these basic standards:

• Freshness: Products should be recently produced
• Purity: No adulteration or contamination
• Authenticity: True to description
• Safety: Meets food safety standards
• Consistency: Uniform quality across batches

PRODUCT-SPECIFIC STANDARDS (Section 2)
-------------------------------------

HONEY STANDARDS:
• Moisture content: Below 20%
• No added sugars or syrups
• Proper filtration (if filtered)
• Clear labeling of source (wild, organic, etc.)
• Proper crystallization management

PICKLE STANDARDS:
• Proper fermentation process
• No artificial preservatives (if claiming natural)
• Clear brine/oil
• Proper seal and packaging
• Consistent spice distribution

OIL STANDARDS:
• Cold-pressed or wood-pressed methods
• Clear labeling of processing method
• No solvent residues
• Proper filtration
• Protected from light and heat

SPICE STANDARDS:
• Whole spices: uniform size, no insects
• Ground spices: no fillers, proper grind
• Fresh aroma and color
• Proper storage conditions
• Accurate labeling of blend ingredients

GRAIN STANDARDS:
• Proper moisture content
• No foreign matter
• No insect damage
• Uniform size and color
• Aged properly (if applicable)

CERTIFICATIONS (Section 3)
-------------------------
We recognize these certifications:

• Organic: USDA Organic, India Organic, EU Organic
• Fair Trade: Fair Trade Certified
• Non-GMO: Non-GMO Project Verified
• Traditional: Geographical Indication tags
• Sustainable: Rainforest Alliance, etc.

QUALITY VERIFICATION PROCESS (Section 4)
---------------------------------------
1. Document Verification:
   • Farm records
   • Certification documents
   • Processing facility details

2. Product Sampling:
   • Random samples tested
   • Lab analysis for contaminants
   • Authenticity verification

3. Ongoing Monitoring:
   • Customer feedback
   • Random checks
   • Regular re-verification

CONSEQUENCES OF NON-COMPLIANCE (Section 5)
-----------------------------------------
• First offense: Warning and education
• Second offense: Temporary suspension
• Repeated offenses: Permanent removal

QUALITY TIPS FOR FARMERS (Section 6)
-----------------------------------
• Maintain clean processing facilities
• Keep detailed records
• Train staff on quality standards
• Regular self-audits
• Listen to customer feedback
• Continuous improvement

For questions about quality standards, contact quality@agrovalueconnect.com

Together, we maintain the highest standards!`
};

// Track downloads in localStorage
export const trackDownload = (guideName) => {
  try {
    // Get existing downloads from localStorage
    const downloads = JSON.parse(localStorage.getItem('guideDownloads') || '[]');
    
    // Add new download
    downloads.push({
      guideName,
      timestamp: new Date().toISOString(),
      id: Date.now()
    });
    
    // Save back to localStorage
    localStorage.setItem('guideDownloads', JSON.stringify(downloads));
    
    return true;
  } catch (error) {
    console.error('Error tracking download:', error);
    return false;
  }
};

// Get download history
export const getDownloadHistory = () => {
  try {
    return JSON.parse(localStorage.getItem('guideDownloads') || '[]');
  } catch (error) {
    console.error('Error getting download history:', error);
    return [];
  }
};

// Clear download history (for testing)
export const clearDownloadHistory = () => {
  localStorage.removeItem('guideDownloads');
};

// Main download function
export const downloadGuide = (guide) => {
  // Get content for this guide
  const content = guideContents[guide.title] || `AGROVALUE CONNECT - ${guide.title}\n\nThis guide contains valuable information to help you succeed on our platform. Please visit our website for the complete guide.`;
  
  // Create filename
  const filename = `${guide.title.replace(/\s+/g, '_')}.txt`;
  
  // Create blob and download
  const blob = new Blob([content], { type: 'text/plain' });
  const url = window.URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.href = url;
  link.download = filename;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  window.URL.revokeObjectURL(url);
  
  // Track the download
  trackDownload(guide.title);
  
  return true;
};